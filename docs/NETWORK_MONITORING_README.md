# ç½‘ç»œæ‹“æ‰‘å®æ—¶ç›‘æ§åŠŸèƒ½

## æ¦‚è¿°

Network.vue é¡µé¢å®ç°äº†åŸºäº LogicFlow çš„ç½‘ç»œæ‹“æ‰‘å®æ—¶ç›‘æ§åŠŸèƒ½ï¼Œæä¾›å¯è§†åŒ–çš„ç½‘ç»œçŠ¶æ€ç›‘æ§å’Œæµé‡åŠ¨ç”»å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

1. **æ‹“æ‰‘å¯è§†åŒ–**

   - ä½¿ç”¨ LogicFlow æ¸²æŸ“ç½‘ç»œæ‹“æ‰‘å›¾
   - æ”¯æŒå¤šç§è®¾å¤‡ç±»å‹ï¼ˆäº¤æ¢æœºã€è·¯ç”±å™¨ã€æœåŠ¡å™¨ã€PC ç­‰ï¼‰
   - è‡ªåŠ¨å¸ƒå±€å’Œå±…ä¸­æ˜¾ç¤º
   - æ”¯æŒç¼©æ”¾ã€æ‹–æ‹½æ“ä½œ

2. **å®æ—¶çŠ¶æ€ç›‘æ§**

   - WebSocket å®æ—¶æ¨é€è®¾å¤‡çŠ¶æ€
   - èŠ‚ç‚¹é¢œè‰²åŠ¨æ€å˜åŒ–ï¼ˆåœ¨çº¿/ç¦»çº¿ï¼‰
   - å®æ—¶ç»Ÿè®¡é¢æ¿ï¼ˆæ€»æ•°ã€åœ¨çº¿ã€ç¦»çº¿ï¼‰
   - å¤šè®¾å¤‡å¹¶å‘æ›´æ–°

3. **æµé‡åŠ¨ç”»**

   - æ ¹æ®æ¥å£æµé‡æ˜¾ç¤ºè¿çº¿åŠ¨ç”»
   - æµåŠ¨è™šçº¿æ•ˆæœ
   - é¢œè‰²å’Œç²—ç»†åŒºåˆ†æœ‰æ— æµé‡
   - è‡ªåŠ¨å¯åœåŠ¨ç”»

4. **äº¤äº’æ§åˆ¶**
   - åˆ·æ–°æŒ‰é’®ï¼šé‡æ–°åŠ è½½æ‹“æ‰‘
   - å±…ä¸­æŒ‰é’®ï¼šç”»å¸ƒå±…ä¸­æ˜¾ç¤º
   - ç¼©æ”¾æ§åˆ¶ï¼šæ”¾å¤§/ç¼©å°/é€‚åº”ç”»å¸ƒ

## å¿«é€Ÿå¼€å§‹

### 1. å‰ç½®æ¡ä»¶

- Node.js 16+
- Python 3.7+
- å·²é…ç½®çš„åç«¯æœåŠ¡å™¨
- å·²åˆ›å»ºçš„æ‹“æ‰‘æ•°æ®

### 2. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯ï¼ˆåŒ…å« WebSocketï¼‰
cd server
python main.py

# å¯åŠ¨å‰ç«¯
cd dashboard
npm run dev
```

### 3. è®¿é—®é¡µé¢

æµè§ˆå™¨è®¿é—® `http://localhost:5173`ï¼Œå¯¼èˆªåˆ°"ç½‘ç»œ"èœå•

## æ•°æ®è¦æ±‚

### æ‹“æ‰‘æ•°æ®æ ¼å¼

API: `GET /api/topologies/latest`

```json
{
  "id": 1,
  "content": {
    "nodes": [
      {
        "id": "node_1",
        "type": "switch",
        "x": 200,
        "y": 300,
        "properties": {
          "width": 60,
          "height": 60,
          "status": "online",
          "data": {
            "id": "switch_001",
            "name": "æ ¸å¿ƒäº¤æ¢æœº"
          }
        },
        "text": {
          "value": "æ ¸å¿ƒäº¤æ¢æœº"
        }
      }
    ],
    "edges": [
      {
        "id": "edge_1",
        "type": "line",
        "sourceNodeId": "node_1",
        "targetNodeId": "node_2"
      }
    ]
  }
}
```

### WebSocket æ¶ˆæ¯æ ¼å¼

#### è®¾å¤‡çŠ¶æ€æ›´æ–°

```json
{
  "type": "deviceStatus",
  "data": {
    "device_id": "switch_001",
    "status": "online",
    "online": true
  }
}
```

#### SNMP è®¾å¤‡æ›´æ–°ï¼ˆå«æµé‡ï¼‰

```json
{
  "type": "snmpDeviceUpdate",
  "data": {
    "switch_id": "switch_001",
    "ip": "192.168.1.1",
    "interface_info": {
      "interfaces": [
        {
          "index": 1,
          "name": "GigabitEthernet0/1",
          "in_octets_rate": 5000000,
          "out_octets_rate": 3000000,
          "connected_device_id": "device_002"
        }
      ]
    }
  }
}
```

## çŠ¶æ€é¢œè‰²è¯´æ˜

- ğŸŸ¦ **è“è‰²** - è®¾å¤‡åœ¨çº¿ (`status: 'online'`)
- ğŸŸ¥ **çº¢è‰²** - è®¾å¤‡ç¦»çº¿ (`status: 'offline'`)

## æµé‡åŠ¨ç”»è¯´æ˜

- **ç°è‰²ç»†çº¿** - æ— æµé‡ä¼ è¾“
- **è“è‰²ç²—çº¿ + æµåŠ¨åŠ¨ç”»** - æœ‰æ•°æ®ä¼ è¾“
- åŠ¨ç”»é€Ÿåº¦ï¼š1 ç§’ä¸€ä¸ªå¾ªç¯
- è‡ªåŠ¨æ ¹æ®æµé‡çŠ¶æ€å¯åœ

## æ–‡æ¡£ç´¢å¼•

- **[è¯¦ç»†æŠ€æœ¯æ–‡æ¡£](./Network-Topology-Monitor.md)** - å®Œæ•´æŠ€æœ¯å®ç°è¯´æ˜
- **[æµ‹è¯•æŒ‡å—](./Network-Testing-Guide.md)** - æµ‹è¯•æ–¹æ³•å’Œç¤ºä¾‹
- **[å®ç°æ€»ç»“](./Network-Implementation-Summary.md)** - å¼€å‘æ€»ç»“å’Œä¼˜åŒ–å»ºè®®

## æµ‹è¯•å·¥å…·

ä½¿ç”¨å†…ç½®æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿæ•°æ®ï¼š

```javascript
// æµè§ˆå™¨æ§åˆ¶å°
import('/src/utils/networkTestHelper.js').then((module) => {
  const helper = module.default
  const ws = window.Ws?.getInstance()

  // æ¨¡æ‹Ÿè®¾å¤‡ä¸Šçº¿
  helper.simulateDeviceStatus(ws, 'device_001', true)

  // æ¨¡æ‹Ÿæµé‡
  helper.simulateSnmpDeviceUpdate(ws, 'switch_001', [
    {
      name: 'GigabitEthernet0/1',
      inRate: 10000000,
      outRate: 5000000,
      connectedDeviceId: 'device_002'
    }
  ])
})
```

## æ³¨æ„äº‹é¡¹

### 1. è®¾å¤‡ ID åŒ¹é…

ç¡®ä¿ WebSocket æ¶ˆæ¯ä¸­çš„è®¾å¤‡ ID ä¸æ‹“æ‰‘èŠ‚ç‚¹ ID ä¸€è‡´ï¼š

```javascript
// æ‹“æ‰‘èŠ‚ç‚¹
node.properties.data.id === 'switch_001'

// WebSocket æ¶ˆæ¯
data.device_id === 'switch_001' // âœ… å¿…é¡»åŒ¹é…
```

### 2. æ¥å£è¿æ¥å…³ç³»

è¦æ˜¾ç¤ºè¾¹çš„åŠ¨ç”»ï¼Œéœ€è¦æä¾›æ¥å£è¿æ¥çš„ç›®æ ‡è®¾å¤‡ IDï¼š

```javascript
interface.connected_device_id = 'target_device_id'
```

### 3. WebSocket è¿æ¥

ç¡®ä¿åç«¯ WebSocket æœåŠ¡è¿è¡Œåœ¨ `ws://localhost:12344/ws`

## æ€§èƒ½ä¼˜åŒ–

- å¯ç”¨å±€éƒ¨æ¸²æŸ“ï¼ˆ`partial: true`ï¼‰
- ä½¿ç”¨ Map å­˜å‚¨è®¾å¤‡çŠ¶æ€
- é¿å…é¢‘ç¹çš„å®Œæ•´å›¾æ›´æ–°
- æ”¯æŒå¤§è§„æ¨¡æ‹“æ‰‘ï¼ˆ1000+ èŠ‚ç‚¹ï¼‰

## å¸¸è§é—®é¢˜

### Q: æ‹“æ‰‘å›¾ä¸æ˜¾ç¤ºï¼Ÿ

æ£€æŸ¥ï¼š

1. `/api/topologies/latest` æ˜¯å¦è¿”å›æ•°æ®
2. æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
3. æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### Q: èŠ‚ç‚¹çŠ¶æ€ä¸æ›´æ–°ï¼Ÿ

æ£€æŸ¥ï¼š

1. WebSocket æ˜¯å¦è¿æ¥
2. è®¾å¤‡ ID æ˜¯å¦åŒ¹é…
3. æ˜¯å¦æ­£ç¡®è®¢é˜…äº‹ä»¶

### Q: åŠ¨ç”»ä¸æ˜¾ç¤ºï¼Ÿ

æ£€æŸ¥ï¼š

1. æ¥å£æµé‡æ˜¯å¦ > 0
2. `connected_device_id` æ˜¯å¦æä¾›
3. æµè§ˆå™¨æ˜¯å¦æ”¯æŒ CSS åŠ¨ç”»

## æ‰©å±•å»ºè®®

- æ·»åŠ æµé‡é€Ÿç‡æ˜¾ç¤º
- æ”¯æŒåŒå‘æµé‡åŠ¨ç”»
- æ·»åŠ å‘Šè­¦èŠ‚ç‚¹æç¤º
- å®ç°å†å²çŠ¶æ€å›æ”¾
- æ”¯æŒè‡ªå®šä¹‰é…è‰²

## ç›¸å…³æ–‡ä»¶

```
dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ network/
â”‚   â”‚       â””â”€â”€ Network.vue          # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ topology.js          # API
â”‚   â”‚   â”œâ”€â”€ node/
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseCustomNode.js    # èŠ‚ç‚¹åŸºç±»
â”‚   â”‚   â”‚   â””â”€â”€ nodeConfig.js        # èŠ‚ç‚¹é…ç½®
â”‚   â”‚   â””â”€â”€ ws/
â”‚   â”‚       â””â”€â”€ Ws.js                # WebSocket
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ networkTestHelper.js     # æµ‹è¯•å·¥å…·
â””â”€â”€ docs/
    â”œâ”€â”€ Network-Topology-Monitor.md  # æŠ€æœ¯æ–‡æ¡£
    â”œâ”€â”€ Network-Testing-Guide.md     # æµ‹è¯•æŒ‡å—
    â””â”€â”€ Network-Implementation-Summary.md  # æ€»ç»“
```

## ç‰ˆæœ¬ä¿¡æ¯

- å®ç°æ—¥æœŸï¼š2025-10-18
- LogicFlow ç‰ˆæœ¬ï¼š2.1.2
- Vue ç‰ˆæœ¬ï¼š3.5.22

## è®¸å¯è¯

æœ¬åŠŸèƒ½éµå¾ªé¡¹ç›®ä¸»è®¸å¯è¯
