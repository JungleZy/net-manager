# æ‹–æ‹½æ—¶ç¦æ­¢æ–‡æœ¬é€‰æ‹©ä¼˜åŒ–

## ğŸ“¦ æ›´æ–°ä¿¡æ¯

**ç‰ˆæœ¬**: v1.2.2  
**æ›´æ–°æ—¥æœŸ**: 2025-10-15  
**æ›´æ–°ç±»å‹**: ç”¨æˆ·ä½“éªŒä¼˜åŒ–

## ğŸ› é—®é¢˜æè¿°

### ä¹‹å‰çš„é—®é¢˜

åœ¨è¿›è¡Œä»¥ä¸‹æ“ä½œæ—¶ï¼Œä¼šæ„å¤–é€‰ä¸­é¡µé¢æ–‡æœ¬ï¼š

1. **æ‹–æ‹½é”šç‚¹åˆ›å»ºè¿çº¿** æ—¶
   - é¼ æ ‡å¿«é€Ÿç§»åŠ¨ä¼šé€‰ä¸­é¡µé¢æ–‡å­—
   - å½±å“æ“ä½œæµç•…æ€§

2. **æ‹–æ‹½èŠ‚ç‚¹ç§»åŠ¨** æ—¶
   - èŠ‚ç‚¹å¿«é€Ÿæ‹–åŠ¨ä¼šé€‰ä¸­èƒŒæ™¯æ–‡æœ¬
   - ç”¨æˆ·ä½“éªŒä¸ä½³

### ç”¨æˆ·ä½“éªŒå½±å“

```
æ‹–åŠ¨é”šç‚¹ â†’ é¡µé¢æ–‡å­—è¢«é€‰ä¸­ â†’ è§†è§‰å¹²æ‰° âŒ
æ‹–åŠ¨èŠ‚ç‚¹ â†’ æ–‡æœ¬é«˜äº®æ˜¾ç¤º â†’ æ“ä½œä¸æµç•… âŒ
```

## âœ… è§£å†³æ–¹æ¡ˆ

### å¤šå±‚é˜²æŠ¤æªæ–½

#### 1. CSS å±‚é¢ç¦ç”¨æ–‡æœ¬é€‰æ‹©

```less
.d3-topology-container {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
```

**è¦†ç›–èŒƒå›´**:
- æ•´ä¸ªæ‹“æ‰‘å›¾å®¹å™¨
- æ‰€æœ‰èŠ‚ç‚¹å…ƒç´ 
- æ‰€æœ‰é”šç‚¹å…ƒç´ 
- æ‹–æ‹½è¿çº¿å…ƒç´ 

#### 2. JavaScript å±‚é¢é˜»æ­¢é»˜è®¤è¡Œä¸º

**é”šç‚¹æ‹–æ‹½ä¼˜åŒ–**:
```javascript
handleAnchorMouseDown(event, anchorData) {
  // é˜»æ­¢é»˜è®¤è¡Œä¸º
  event.preventDefault()
  event.stopPropagation()
  
  // ä¸´æ—¶ç¦ç”¨æ–‡æœ¬é€‰æ‹©
  document.body.style.userSelect = 'none'
  
  // é¼ æ ‡ç§»åŠ¨æ—¶ç»§ç»­é˜»æ­¢
  const handleMouseMove = (e) => {
    e.preventDefault()
    // ... æ›´æ–°è¿çº¿ä½ç½®
  }
  
  // é¼ æ ‡é‡Šæ”¾æ—¶æ¢å¤
  const handleMouseUp = (e) => {
    document.body.style.userSelect = ''
    // ... å®Œæˆè¿çº¿
  }
}
```

**èŠ‚ç‚¹æ‹–æ‹½ä¼˜åŒ–**:
```javascript
dragStarted(event, d) {
  // é˜»æ­¢æºäº‹ä»¶çš„é»˜è®¤è¡Œä¸º
  if (event.sourceEvent) {
    event.sourceEvent.preventDefault()
    event.sourceEvent.stopPropagation()
  }
  
  // ä¸´æ—¶ç¦ç”¨æ–‡æœ¬é€‰æ‹©
  document.body.style.userSelect = 'none'
}

dragEnded(event, d) {
  // æ¢å¤æ–‡æœ¬é€‰æ‹©
  document.body.style.userSelect = ''
}
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | è¡Œæ•° |
|------|---------|------|
| `D3Topology.vue` | æ·»åŠ  CSS user-select | +11 è¡Œ |
| `D3TopologyGraph.js` | ä¼˜åŒ–æ‹–æ‹½äº‹ä»¶å¤„ç† | +23 è¡Œ |

### æ ¸å¿ƒä¼˜åŒ–ç‚¹

#### 1. å…¨å±€å®¹å™¨ç¦ç”¨

```less
// æœ€å¤–å±‚å®¹å™¨
.d3-topology-container {
  user-select: none;  // æ ‡å‡†
  -webkit-user-select: none;  // Webkit å†…æ ¸
  -moz-user-select: none;  // Firefox
  -ms-user-select: none;  // IE/Edge
}
```

#### 2. å…³é”®å…ƒç´ å¼ºåŒ–

```less
// èŠ‚ç‚¹
:deep(.node) {
  user-select: none;
}

// é”šç‚¹
:deep(.anchor) {
  user-select: none;
}

// æ‹–æ‹½çº¿
:deep(.drag-line) {
  user-select: none;
}
```

#### 3. åŠ¨æ€æ§åˆ¶

```javascript
// æ‹–æ‹½å¼€å§‹ - ç¦ç”¨
document.body.style.userSelect = 'none'

// æ‹–æ‹½ç»“æŸ - æ¢å¤
document.body.style.userSelect = ''
```

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä¼˜åŒ–å‰

| æ“ä½œ | æ–‡æœ¬é€‰æ‹© | ç”¨æˆ·ä½“éªŒ |
|------|---------|---------|
| æ‹–æ‹½é”šç‚¹ | âŒ ä¼šé€‰ä¸­ | â­â­ è¾ƒå·® |
| æ‹–æ‹½èŠ‚ç‚¹ | âŒ ä¼šé€‰ä¸­ | â­â­ è¾ƒå·® |
| å¿«é€Ÿæ‹–åŠ¨ | âŒ å¤§é¢ç§¯é€‰ä¸­ | â­ å¾ˆå·® |

### ä¼˜åŒ–å

| æ“ä½œ | æ–‡æœ¬é€‰æ‹© | ç”¨æˆ·ä½“éªŒ |
|------|---------|---------|
| æ‹–æ‹½é”šç‚¹ | âœ… ä¸é€‰ä¸­ | â­â­â­â­â­ ä¼˜ç§€ |
| æ‹–æ‹½èŠ‚ç‚¹ | âœ… ä¸é€‰ä¸­ | â­â­â­â­â­ ä¼˜ç§€ |
| å¿«é€Ÿæ‹–åŠ¨ | âœ… ä¸é€‰ä¸­ | â­â­â­â­â­ ä¼˜ç§€ |

## âœ¨ ç”¨æˆ·ä½“éªŒæå‡

### 1. æ“ä½œæµç•…åº¦

**ä¹‹å‰**:
```
æ‹–åŠ¨ â†’ æ–‡æœ¬é€‰ä¸­ â†’ è§†è§‰å¹²æ‰° â†’ éœ€è¦æ‰‹åŠ¨å–æ¶ˆé€‰æ‹©
```

**ç°åœ¨**:
```
æ‹–åŠ¨ â†’ æ— å¹²æ‰° â†’ æµç•…æ“ä½œ âœ“
```

### 2. ä¸“ä¸šæ€§

- è¡Œä¸ºä¸ä¸“ä¸šç½‘ç»œæ‹“æ‰‘å·¥å…·ä¸€è‡´
- ç¬¦åˆç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯
- æå‡æ•´ä½“ä¸“ä¸šæ„Ÿ

### 3. æ“ä½œå‡†ç¡®æ€§

- ä¸ä¼šå› æ–‡æœ¬é€‰æ‹©å¹²æ‰°è§†çº¿
- å¯ä»¥ç²¾ç¡®æ‹–æ‹½åˆ°ç›®æ ‡ä½ç½®
- å‡å°‘è¯¯æ“ä½œ

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

### CSS user-select æ”¯æŒ

| æµè§ˆå™¨ | æ”¯æŒç‰ˆæœ¬ | å‰ç¼€ |
|--------|---------|------|
| Chrome | 54+ | æ— éœ€ |
| Firefox | 69+ | -moz- (æ—§ç‰ˆ) |
| Safari | 15.4+ | -webkit- (æ—§ç‰ˆ) |
| Edge | 79+ | æ— éœ€ |
| IE | 10+ | -ms- |

### JavaScript äº‹ä»¶æ”¯æŒ

| æ–¹æ³• | å…¼å®¹æ€§ |
|------|--------|
| `preventDefault()` | âœ… æ‰€æœ‰ç°ä»£æµè§ˆå™¨ |
| `stopPropagation()` | âœ… æ‰€æœ‰ç°ä»£æµè§ˆå™¨ |
| `document.body.style.userSelect` | âœ… IE 10+ |

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ–‡æœ¬é€‰æ‹©æ¢å¤

**é‡è¦**: ç¡®ä¿åœ¨æ‹–æ‹½ç»“æŸåæ¢å¤æ–‡æœ¬é€‰æ‹©èƒ½åŠ›

```javascript
// æ­£ç¡®åšæ³•
dragEnded() {
  document.body.style.userSelect = ''  // âœ… æ¢å¤
}

// é”™è¯¯åšæ³•
dragEnded() {
  // âŒ å¿˜è®°æ¢å¤ï¼Œå¯¼è‡´å…¨å±€æ— æ³•é€‰æ‹©æ–‡æœ¬
}
```

### 2. æ–‡æœ¬æ ‡ç­¾

èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾**ä»ç„¶ä¸å¯é€‰ä¸­**ï¼Œè¿™æ˜¯è®¾è®¡å†³å®šï¼š

- ä¼˜ç‚¹ï¼šæ‹–æ‹½æ—¶ä¸å¹²æ‰°
- ç¼ºç‚¹ï¼šæ— æ³•å¤åˆ¶èŠ‚ç‚¹åç§°

**å¦‚éœ€å¤åˆ¶èŠ‚ç‚¹åç§°**ï¼Œå¯ä»¥ï¼š
- åŒå‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦æƒ…
- ä½¿ç”¨å³é”®èœå•åŠŸèƒ½
- å¯¼å‡ºæ‹“æ‰‘å›¾æ•°æ®

### 3. æ€§èƒ½å½±å“

åŠ¨æ€ä¿®æ”¹ `userSelect` æ ·å¼çš„æ€§èƒ½å½±å“ï¼š

- å•æ¬¡æ“ä½œï¼š< 1ms
- é¢‘ç¹æ“ä½œï¼šå¯å¿½ç•¥
- æ— æ˜æ˜¾æ€§èƒ½é—®é¢˜

## ğŸ”„ å…¼å®¹æ€§ä¿è¯

### å‘åå…¼å®¹

- âœ… ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… ä¸æ”¹å˜æ•°æ®æ ¼å¼
- âœ… ä¸å½±å“ API æ¥å£

### é™çº§æ–¹æ¡ˆ

å¯¹äºä¸æ”¯æŒ `user-select` çš„æ—§æµè§ˆå™¨ï¼š

- è‡ªåŠ¨é™çº§ï¼Œä¸æŠ¥é”™
- ä»æœ‰ JavaScript å±‚é˜²æŠ¤
- ç”¨æˆ·ä½“éªŒç•¥æœ‰ä¸‹é™ï¼Œä½†åŠŸèƒ½æ­£å¸¸

## ğŸ“ æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•

1. **æ‹–æ‹½é”šç‚¹åˆ›å»ºè¿çº¿**
   - âœ… å¿«é€Ÿæ‹–åŠ¨ä¸é€‰ä¸­æ–‡æœ¬
   - âœ… è¿çº¿åˆ›å»ºåŠŸèƒ½æ­£å¸¸

2. **æ‹–æ‹½èŠ‚ç‚¹ç§»åŠ¨**
   - âœ… èŠ‚ç‚¹æ‹–åŠ¨æµç•…
   - âœ… ä¸é€‰ä¸­èƒŒæ™¯æ–‡æœ¬

3. **å…¶ä»–åŒºåŸŸæ–‡æœ¬é€‰æ‹©**
   - âœ… æ‹“æ‰‘å›¾å¤–çš„æ–‡æœ¬å¯æ­£å¸¸é€‰æ‹©
   - âœ… æ‹–æ‹½ç»“æŸåæ¢å¤æ­£å¸¸

### æµè§ˆå™¨æµ‹è¯•

- âœ… Chrome æœ€æ–°ç‰ˆ
- âœ… Firefox æœ€æ–°ç‰ˆ
- âœ… Safari æœ€æ–°ç‰ˆ
- âœ… Edge æœ€æ–°ç‰ˆ

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

**æ— éœ€ä»»ä½•é…ç½®**ï¼Œåˆ·æ–°é¡µé¢å³å¯ç”Ÿæ•ˆï¼

ç°åœ¨å¯ä»¥æµç•…åœ°ï¼š
- æ‹–æ‹½é”šç‚¹åˆ›å»ºè¿çº¿
- æ‹–æ‹½èŠ‚ç‚¹è°ƒæ•´ä½ç½®
- ä¸å—æ–‡æœ¬é€‰æ‹©å¹²æ‰°

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ‹–æ‹½æ“ä½œ

- è‡ªç„¶æ‹–åŠ¨ï¼Œæ— éœ€é¡¾è™‘æ–‡æœ¬é€‰æ‹©
- å¯ä»¥å¿«é€Ÿã€å¤§å¹…åº¦ç§»åŠ¨
- æ“ä½œæ›´åŠ æµç•…

### 2. å¤šèŠ‚ç‚¹æ“ä½œ

- è¿ç»­æ‹–æ‹½å¤šä¸ªèŠ‚ç‚¹
- åˆ›å»ºå¤šæ¡è¿çº¿
- ä¸ä¼šæœ‰æ–‡æœ¬é€‰æ‹©ç´¯ç§¯

### 3. ç²¾ç¡®å®šä½

- å¯ä»¥æ…¢é€Ÿç²¾ç¡®æ‹–åŠ¨
- ä¸ä¼šå› æ–‡æœ¬é€‰æ‹©å½±å“è§†çº¿
- æé«˜æ“ä½œå‡†ç¡®æ€§

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [D3 æ‹“æ‰‘å›¾ä½¿ç”¨æ–‡æ¡£](./D3_TOPOLOGY_README.md)
- [é”šç‚¹è¿çº¿æŒ‡å—](./ANCHOR_LINK_GUIDE.md)
- [èŠ‚ç‚¹èƒŒæ™¯ç§»é™¤è¯´æ˜](./NODE_BACKGROUND_REMOVAL.md)

---

**ç‰ˆæœ¬**: v1.2.2  
**ä½œè€…**: Qoder AI  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•  
**ä¼˜å…ˆçº§**: é«˜ï¼ˆç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼‰
